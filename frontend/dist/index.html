<html>
	<head>
		<meta charset="utf-8">
		<meta name="author" content="Timm,Denny,Julian" >
		<meta name="description" content="A marebling tool">
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="stylesheet.css">
		<script>
			function switchStore() {
				if(switchStore.input.checked) {
					window.localStorage.setItem('store-active', '1');
				} else {
					if(window.confirm('When you disable browser storage all stored options will be cleared.\nThere is no way to undo this!')) {
						window.localStorage.clear();
					} else {
						switchStore.input.checked = true
					}
				}
				if(window.storage) {
					try {
						window.storage = new window.Storage()
					} catch (e) {
						window.alert('Failed to enable storing!\nThis may caused by the Application is not fully loaded!')
						console.error(e)
						switchStore.input.checked = false
					}
				}
			}
			document.addEventListener('DOMContentLoaded', function() {
				const input = document.getElementById('store-active')
				switchStore.input = input
				input.checked = window.localStorage.getItem('store-active');
			});
		</script>
		<script src="index.js"></script>
		<script src="Marbellous.js"></script>
		<title>Marbellous</title>
	</head>
	<body>
	<noscript>
		<div style="position: absolute; top:50%;left:25%; z-index: 10;background: #EEE; border: solid gray 5px;transform: translate(-16%,-50%);min-width:75%;text-align:center;">
			<p style="margin: 30 30 0 30">
				<b>You must enable JavaScript to use Marbellous in your browser.</b>
			</p><p style="margin: 15 30 30 30">
				Please consider one of the following guides if you don't know how: <a href="https://www.enablejavascript.io/en">https://www.enablejavascript.io/en</a>
			</p>
		</div>
	</noscript>
	<input id="sidebar-btn" type="checkbox" class="sidebar">
	<label for="sidebar-btn" class="sidebar">
		<img src="icons/arrow-right-solid.svg" title="">
	</label>
	<menu class="sidebar">
		<!-- general -->
		<li>
				<input type="radio" name="sidebar" id="sidebar-general" />
				<label for="sidebar-general">General</label>
				<div>
					<table>
						<tr>
							<td><label title="Enable to store settings in browser. This will persist the settings even when you close and revisit the site later. This only effects settings which you changed after enabling storing!">store settings</label></td>
							<td><label class="switch" title="Enable to store settings in browser. This will persist the settings even when you close and revisit the site later. This only effects settings which you changed after enabling storing!">
									<input id="store-active" class="slider" type="checkbox" onclick="switchStore()">
									<span class="slider"></span>
								</label></td>
						</tr>
					</table>
				</div>
		</li>
		<!-- help menu -->
		<li>
				<input type="radio" name="sidebar" id="sidebar-help"/>
				<label for="sidebar-help">Help</label>
				<div>
					Bla bla helpful<br>
					explain rake syntax (TODO)
				</div>
		</li>
		<!-- rake -->
		<li>
				<input type="radio" name="sidebar" id="sidebar-rake"/>
				<label for="sidebar-rake">Rake</label>
				<div>
					<label
						for="sidebar-rake-placement"
						title="space between nails in rake">
							placement:
						</label>
						<br>
					<input
							title="<offset>:<space>(,<space>)*"
							id="sidebar-rake-placement"
							type="text" autocomplete="on"
							pattern="([0-9]*:)?([0-9]+,)*[0-9]+"
							value="20">%
				</div>
		</li>
		<!-- pallet -->
		<li>
				<input type="radio" name="sidebar" id="sidebar-pallet"/>
				<label for="sidebar-pallet">Pallet</label>
				<div>
					<table>
						<tr>
							<td><label for="sidebar-pallet-active-pallet" title="select current pallet">active:</label></td>
							<td><select name="active-pallet" id="sidebar-pallet-active-pallet">
									<option value="pallet-1">default</option>
									<option value="pallet-2">light</option>
									<option value="pallet-3">funky</option>
								</select></td>
						</tr><tr>
							<td>Colors:</td>
						</tr><tr class ="sub-row">
							<td><label for="sidebar-pallet-color-1">A:</label></td>
							<td><input id="sidebar-pallet-color-1" type="color"
								value="#228B22"></td>
						</tr><tr class="sub-row">
							<td><label for="sidebar-pallet-color-2">B:</label></td>
							<td><input id="sidebar-pallet-color-2" type="color"
								value="#FFD700"></td>
						</tr><tr class="sub-row">
							<td><label for="sidebar-pallet-color-3">C:</label></td>
							<td><input id="sidebar-pallet-color-3" type="color"
								value="#DC143C"></td>
						</tr><tr>
							<td><label for='sidebar-pallet-background'>Background:</label></td>
						</tr><tr>
							<td></td>
							<td><input id="sidebar-pallet-background" type="color"
								value="#F7E9CE"></td>
						</tr>
					</table>
				</div>
		</li>
	</menu>
	</menu>
	<div id="content" style="height:100%"><menu class="menu">
			<li class="draw state"><input type="radio" id="color-picker" name="menu">
				<label for="color-picker" title="select a color to apply">
					<img src="icons/palette-solid.svg" alt="color picker">
				</label><!-- romves whitespaces
				--><menu option="pallet">
					<li><input type="radio" id="color-1" name="color-picker" checked>
						<label for="color-1" title="change to color 1">
							<img src="icons/empty.svg" alt="color-1">
						</label>
					</li>
					<li><input type="radio" id="color-2" name="color-picker">
						<label for="color-2" title="change to color 2">
							<img src="icons/empty.svg" alt="color-2">
						</label>
					</li>
					<li><input type="radio" id="color-3" name="color-picker">
						<label for="color-3" title="change to color 3">
							<img src="icons/empty.svg" alt="color-3">
						</label>
					</li>
				</menu>
			</li>

			<li class="rake state"><input type="radio" id="rake-movement" name="menu">
				<label for="rake-movement" title="select movement for rake">
					<img src="icons/movement.svg">
				</label>
				<menu option="rake">
					<li><input type="radio" id="rake-movement-linear" name="rake-movement" checked>
						<label for="rake-movement-linear" title="Move rake straigth">
							<img src="icons/straight.svg">
						</label>
					</li>
					<li><input type="radio" id="rake-movement-wave" name="rake-movement">
						<label for="rake-movement-wave" title="Move rake in wave like facion.">
							<img src="icons/wave.svg">
						</label>
					</li>
				</menu>
			</li>

			<li class="draw state"><input type="radio" id="color-dropper" name="menu" checked>
				<label for="color-dropper" title="Create color blobs at position when applied. Hold for larger drops">
					<img src="icons/eye-dropper-solid.svg" alt="color dropper">
				</label>
			</li>

			<li class="draw state"><input type="radio" id="color-sprinkler" name="menu">
				<label for="color-sprinkler" title="Apply color in random pattern. Hold for more drops.">
					<img src="icons/sparkle-solid.svg" alt="color sprinkler">
				</label>
			</li>

			<li><input type="button" id="clear" name="history">
				<label for="clear" title="Clear canvas">
					<img src="icons/chalkboard-solid.svg" alt="clear canvas">
				</label>
			</li>
			<li><input type="button" id="switch-state" name="history">
				<label for="switch-state" title="Start rakeing!">
					<img src="icons/arrow-right-solid.svg">
				</label>
			</li>

			<li><input type="button" id="download">
				<label for="download" title="Download current canvas state as image">
					<img src="icons/file-download-solid.svg" alt="download">
				</label>
			</li>

		</menu><!-- removes whitespace
			--><div style="display:inline-block"><h1 style="text-align:center">Marbellous</h1><div class="page">
			<canvas width="720" height="720" id="image" style="background: #f7e9ce;"></canvas>
			<canvas width="720" height="720" id="overlay"></canvas>
		</div></div>
		<p class="notice">The source code and legal notice can be found at the <a href="https://github.com/t-erxleben/marbellous">Marbellous</a> GitHub repository.</p>
		</div>
		<img style="display: none" id="img-color-dropper" width="32" height="32" src="icons/eye-dropper-solid.png">
		<img style="display: none" id="img-color-sparkle" width="32" height="32" src="icons/sparkle-solid.png">
	</body>
</html>
